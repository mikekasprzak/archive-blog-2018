---
id: 4496
title: AppDailySales, and running on Synology NAS Devices
date: 2011-08-23T23:59:29+00:00
author: Mike K
layout: post
guid: http://www.toonormal.com/?p=4496
permalink: /2011/08/23/appdailysales-and-running-on-synology-nas-devices/
categories:
  - Technobabble
  - The Business of Things
---
[<img src="/wp-content/uploads/2011/08/002-150x150.jpg" alt="" title="002" width="150" height="150" class="alignright size-thumbnail wp-image-4517" srcset="/wp-content/uploads/2011/08/002-150x150.jpg 150w, /wp-content/uploads/2011/08/002-450x450.jpg 450w, /wp-content/uploads/2011/08/002-640x640.jpg 640w, /wp-content/uploads/2011/08/002.jpg 1024w" sizes="(max-width: 150px) 100vw, 150px" />](/wp-content/uploads/2011/08/002.jpg)Continuing [my prior post](/2011/08/23/i-am-running-a-synology-nas-now/) where I talk about my server replacement, a Synology NAS (DS211j). In essence, a cheap, tiny dedicated Linux box featuring an ARM CPU and custom web UI specially designed for SUPER EASY RAID array maintenance and creation. There&#8217;s [a 4 drive version](http://www.synology.com/products/product.php?product_name=DS411j&lang=enu), some [many-more drive](http://www.synology.com/products/index.php?lang=enu) versions, but they cost more.

This time, I&#8217;m here to talk about a little tool for getting your daily sales data from Apple&#8217;s iTunes Connect website. **AppDailySales**!

<http://code.google.com/p/appdailysales/>

This is a python script I was recommended some months back, but it needed a few things IMO. So in a shocking rare case of OSS justice, I added the features I wanted myself and submitted a patch:

<http://code.google.com/p/appdailysales/issues/detail?id=31&can=1>

Just a few days ago (nine months later), version 2.9 was released (sparked by Apple&#8217;s change to the system), now including my patches! ðŸ˜€

To run the script, all you need is Python. Before I used to run this on Windows XP (Python installed in C:\Python2.7\, with PATH environment variable set to include this). 

Now with the NAS, I SSH in to the device (Go download Putty if on Windows), login as root (same password as admin), and install the python package.

`ipkg install python`

Easy. Done.

Place the AppDailySales.py script somewhere on your computer, likely in the same folder you want your stats placed. Then simply invoke it with &#8211;help to get a list of arguments.

`python appdailysales.py --help`

I run it from a batch file or script. My old Batch File Version looks like this:

<pre>python appdailysales.py -a me@mydomain.com -p mypassword -f %%Y/%%Y-%%m/Daily-%%Y-%%m-%%d.txt -u -d 14 -v -n
</pre>

The new, shockingly similar shell script version (i.e. only single %&#8217;s) is this:

<pre>#!/bin/sh
python appdailysales.py -a me@mydoman.com -p mypassword -f %Y/%Y-%m/Daily-%Y-%m-%d.txt -u -d 14 -v -n
</pre>

This creates files like so:

`2010/2010-12/Daily-2010-12-13.txt<br />
2010/2010-12/Daily-2010-12-12.txt<br />
2010/2010-12/Daily-2010-12-11.txt<br />
2010/2010-12/Daily-2010-12-10.txt`

Nice and easy to read names, unlike the default files generated by iTunes Connect.

In the next section, I&#8217;ll talk more about setting it up as a service. In other words, totally automated!

<!--more-->\* \* *

Regretably, I did not document what I did on the Windows XP side.

But, looking at the state of my server, it looks like I created a separate user for this script. This user has Task Scheduler task set up for him, that runs the batch file every day at noon EST (a good 4 hours after sales data usually goes online). Task Scheduler can be found in the Control Panel under Administrative Tools.

I can&#8217;t remember if there was a specific reason I created this extra user though. Sorry.

\* \* *

I am not a VI expert, but the SVN instructions from last time taught me a few things&#8230; a few things I&#8217;ll probably forget, so here comes some point form TODO.

`vi /etc/crontab`

SHIFT+A to enter Append mode, and jump to end of the current line.

Press Enter. There should be no entries in the crontab file (just description). Use tabs to jump between notes.

For my 12 hour daily task, [I did the following](http://adminschoice.com/crontab-quick-reference):

`0  12  *  *  *  appdailysales  cd /volume1/Mike/SalesStats/;./getstats.sh`

appdailysales is a dummy user created that will run the task (I don&#8217;t even know the password). The invocation changes to the correct director

Press ESC to exit append mode.

Now you can type &#8220;**:wq**&#8221; to write the file and exit.

The job is now added. Finally, [restart the service](http://www.jmd.cc/servers/how-to-run-a-cronjob-on-a-synology-nas/).

`synoservice --restart crond`

And that&#8217;s it! We&#8217;re done! Admittedly, I haven&#8217;t checked if this works yet, but IT SHOULD! Hehe. I&#8217;ll know in the morning if I have a new log file.

\* \* *

And there we have it! Done! I have now moved the entirety of my server function to the Synology NAS device.

Now my dying server is free to be formatted, dead drives removed, and converted in to a workstation running RAID 5 on the remaining disks.